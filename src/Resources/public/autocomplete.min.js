!function(){function e(e,t){let o;for(o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function t(e){let t="";if(null!=e&&e.length>0)for(let o=0;o<e.length;o++)t+='<li data-value="'+e[o].value+'">'+e[o].label+"</li>";return t}function o(e){document.onclick=function(t){let o=!1;for(let n=t.target;null!==n&&n!==document.body;n=n.parentNode)if(n.id===e.selector){o=!0;break}o||(document.querySelector("#"+e.selector+" > .result__container ul").innerHTML="",document.querySelector("#"+e.selector+" > .result__container > ul").style.display="none")}}this.AutoComplete=function(){this.minChar=1,this.selector="",this.eventArr=[],this.url="",this.search="",this.param="",this.method="",this.autoSubmit=0,this.debug=!1;let t={minChar:1,selector:"",url:"",method:"GET",param:"",autoSubmit:0,debug:!1};arguments[0]&&"object"==typeof arguments[0]&&(this.options=e(t,arguments[0])),this.minChar=this.options.minChar,this.selector=this.options.selector,this.url=this.options.url,this.param=this.options.param,this.method=this.options.method,this.autoSubmit=this.options.autoSubmit,this.debug=this.options.debug,this.autocomplete(),o(this)},AutoComplete.prototype.autocomplete=function(){let e=this;document.querySelector("#"+e.selector+" input").addEventListener("keyup",(function(o){let n=document.querySelector("#"+e.selector+" input").value;null!=n&&n.length>=e.minChar&&(e.debug&&console.log("__autocomplete term:  ",n),function(e,o){let n=new XMLHttpRequest;"GET"===e.method||"get"===e.method?n.open("GET",e.url+"?search="+o+e.param,!0):n.open("POST",e.url,!0);n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){let o,l=n.responseText;e.debug&&console.log("responseText: ",l);try{o=JSON.parse(l)}catch(e){o={content:l}}null===o?o={content:""}:"object"!=typeof o&&(o={content:l}),e.debug&&console.log("result: ",o),""!=t(o)&&(document.querySelector("#"+e.selector+" > .result__container > ul").innerHTML=t(o),function(e){let t=document.querySelector("#"+e.selector+" > input");document.querySelector("#"+e.selector+" > .result__container > ul").style.width=t.offsetWidth+"px",document.querySelector("#"+e.selector+" > .result__container > ul").style.display="block"}(e),function(e){let t=document.querySelectorAll("#"+e.selector+" ul > li");for(let o=0;o<t.length;o++)t[o].addEventListener("click",(function(){document.querySelector("#"+e.selector+" > input").value=this.getAttribute("data-value"),document.querySelector("#"+e.selector+" > .result__container ul").innerHTML="",document.querySelector("#"+e.selector+" > .result__container > ul").style.display="none","1"===e.autoSubmit&&document.querySelector("#"+e.selector).closest("form").submit()}))}(e))}else 200!==n.status&&e.debug&&console.log(n.status)},"GET"===e.method||"get"===e.method?n.send():n.send(e.param)}(e,n))}))}}();
//# sourceMappingURL=autocomplete.min.js.map